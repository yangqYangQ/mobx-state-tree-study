(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports=a(22)},22:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(8),c=a.n(i),l=a(2),s=a(6),o=a(5);a(16);var m=Object(o.a)(({item:e})=>{return r.a.createElement("div",null,r.a.createElement("input",{value:e.name,onChange:({target:{value:t}})=>{e.changeName(t)}}),r.a.createElement("input",{value:e.price,onChange:({target:{value:t}})=>{const a=Number(t);isNaN(a)||e.changePrice(a)}}))});var u=({item:e})=>{const t=Object(n.useState)(!1),a=Object(s.a)(t,2),i=a[0],c=a[1],o=Object(n.useMemo)(()=>Object(l.c)(e),[e]),u=()=>{c(!1)},g=()=>{Object(l.b)(e,Object(l.g)(o)),c(!1)};return i?r.a.createElement("li",null,r.a.createElement(m,{item:o}),r.a.createElement("button",{onClick:u},"\u53d6\u6d88"),r.a.createElement("button",{onClick:g},"\u4fdd\u5b58")):r.a.createElement("li",null,"name: ",e.name,r.a.createElement("div",null,"price: ",e.price),r.a.createElement("span",null,r.a.createElement("button",{onClick:()=>{c(!0)}},"\u4fee\u6539"),r.a.createElement("button",{onClick:e.remove},"\u522a\u9664")))};var g=l.i.model({name:l.i.string,price:l.i.number}).actions(e=>({changeName(t){e.name=t},changePrice(t){e.price=t},remove(){Object(l.f)(e,2).remove(e)}}));var p=({list:e})=>{const t=g.create({name:"",price:0});return r.a.createElement("div",null,r.a.createElement(m,{item:t}),r.a.createElement("button",{onClick:()=>{e.addItem(t)}},"\u65b0\u589e"))};var d=Object(o.a)(({list:e})=>r.a.createElement("div",null,r.a.createElement("h3",null,"WishLists"),r.a.createElement("ul",null,e.items.map((e,t)=>r.a.createElement(u,{key:t,item:e}))),"total price\uff1a ",e.totalPrice,r.a.createElement(p,{list:e.wishList})));var v=({group:e})=>{const t=Object(n.useState)(null),a=Object(s.a)(t,2),i=a[0],c=a[1];return r.a.createElement("div",null,r.a.createElement("select",{onChange:t=>{c(e.users.get(t.target.value))}},r.a.createElement("option",null,"- select user -"),Array.from(e.users.values()).map(e=>r.a.createElement("option",{key:e.id,value:e.id},e.name))),i&&r.a.createElement(d,{list:i.wishList}),i&&r.a.createElement("button",{onClick:i.getSuggestions},"\u5efa\u8bae\u6570\u636e"))},E=a(9),b=a.n(E);var h=l.i.model({items:l.i.optional(l.i.array(g),[])}).actions(e=>({addItem(t){e.items.push(t)},remove(e){Object(l.d)(e)}})).views(e=>({get totalPrice(){return e.items.reduce((e,t)=>e+t.price,0)}}));var w=l.i.model({id:l.i.string,name:l.i.string,gender:l.i.enumeration("gender",["f","m"]),wishList:l.i.optional(h,{})}).actions(e=>({getSuggestions:Object(l.e)(b.a.mark(function t(){var a,n;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.fetch("http://localhost:3001/suggestions_".concat(e.gender));case 2:return a=t.sent,t.next=5,a.json();case 5:n=t.sent,e.wishList.items.push(...n);case 7:case"end":return t.stop()}},t)}))}));var O=l.i.model({users:l.i.map(w)});let j={users:{1:{id:"1",name:"Anna",gender:"f"},2:{id:"2",name:"Bob",gender:"m"},3:{id:"3",name:"Christan",gender:"f"},4:{id:"4",name:"David",gender:"m"}}};if(localStorage.getItem("wishListApp")){const e=JSON.parse(localStorage.getItem("wishListApp"));O.is(e)&&(j=e)}let f=O.create(j);Object(l.a)(f,(e,t)=>(console.log("[".concat(e.type,"] ").concat(e.name)),t(e)));const k=document.getElementById("root");c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v,{group:f})),k),Object(l.h)(f,e=>{localStorage.setItem("wishListApp",JSON.stringify(e))})}},[[11,1,2]]]);
//# sourceMappingURL=main.70d1c4ec.chunk.js.map